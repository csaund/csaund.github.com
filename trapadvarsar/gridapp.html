<!DOCTYPE html>
<head>
	<title>
		Carolyn's TripAdvisor Homework
	</title>
	<style>

	/*
	#X{
		color: red;
	}
	#O{
		color: blue;
	}
	*/
	</style>

<script>
	//Carolyn Saund Trip Advisor Assignment
	//15 Oct 2014

	function handleJS(){
		params = getJsonFromUrl();
		var w = 4;
		var h = 5;
		if(params['width']){
			w = params['width'];
		}
		if(params['height']){
			h = params['height'];
		}
		var grid = initGrid(w, h);
		drawGrid(w, h, grid);
		var button = document.getElementById("flip");
		button.onclick = function(){return flipGrid(grid);}
	}

	function getJsonFromUrl() {
		var url = document.URL;
		var params = url.split("?")[1];
		var data = params.split("&");
		var result = {};
		for(var i=0; i<data.length; i++) {
			var item = data[i].split("=");
			result[item[0]] = item[1];
		}
		return result;
	}

	function initGrid(w, h){
		var grid = [];
		var g = w*h 
		for(var i = 0; i < g; i++){
			var cell = document.createElement("td");
			cell.class="cell";
			if(Math.round(Math.random() * 100) % 2){	
				cell.id = "X"
				cell.innerHTML = "X";
			}
			else{
				cell.id = "O";
				cell.innerHTML = "O";
			}
			grid.push(cell);
		}
		return grid;
	}

	function flipGrid(grid){ 
		var l = grid.length;
		for(var i = 0; i < l; i++){
			if(grid[i].id == "X"){
				grid[i].id = "O";
				grid[i].innerHTML = "O";
			}
			else{
				grid[i].id = "X";
				grid[i].innerHTML = "X";
			}
		}
	}

	function drawGrid(w, h, grid){
		var gridDiv = document.getElementById("grid");
		gridDiv.innerHTML = "";
		var l = grid.length;
		var i = 0;
		var j = 0;
		while(i < l){
			var row = document.createElement("tr");
			while(i < w*j){
				row.id = "row";
				row.appendChild(grid[i]);
				i += 1;
			}
			j+= 1;
			gridDiv.appendChild(row);
		}
	}

</script>

</head>

<body onload="handleJS()">
	<div>
		<h2>A random grid</h2>
	</div>
	<div id="grid">
	</div>
	<button id="flip">
		<h2>Flip</h2>
	</button>
</body>



